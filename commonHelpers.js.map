{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_exclamation-triangle.png","../src/js/render-functions.js","../src/img/bi_x-octagon.png","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEjSURBVHgBzVWBDYIwEDw3YAM7ghvICG6AG8gGuIFuwAjECRjBEXQD3eB9zCEf0lpASLzkE/iv99/eWYB/gogcNDIsASU+S4cT5oQSOhKXDTmfHeaCklUaNzZKNB4aNeaAEu05cWZyOXMpfgUnv3nyV9YSTIX++MhJt3zftztppmetwBRYYfm+My5Kmauoh8NY0DEft/QabM0Q4wU3ZIXJbfoNmC9GC+4T1hxZg7XJJxIwQog879vS1N7w5FvB8xi54zQlBu7M1GrqkXxrUFphAyQVwsM1OCGyYJqvERG83b588bSYP1qg7r+nxHPfBMhlxLqsTbghNhvagGvrj+DS3TcOEcSOyKzr7ik+lJgZdORjRUFSLIP7ikezxIf8qXHB0ngB0x4XMNg0o7IAAAAASUVORK5CYII=\"","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nfunction renderFunctions(photos) {\n  const list = document.querySelector('.photos-list');\n\n  const photoList = photos\n    .map(\n      ({\n        downloads,\n        comments,\n        views,\n        likes,\n        tags,\n        webformatURL,\n        largeImageURL,\n      }) => `\n    <li class=\"gallery\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n      <div class=\"gallery-wrap\"><span class=\"span\">Likes <span class=\"value\">${likes}</span></span>\n      <span class=\"span\">Views <span class=\"value\">${views}</span></span>\n      <span class=\"span\">Comments <span class=\"value\">${comments}</span></span>\n      <span class=\"span\">Downloads <span class=\"value\">${downloads}</span></span></div></a>\n    </li>`\n    )\n    .join('');\n\n  list.insertAdjacentHTML('beforeend', photoList);\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n}\n\nfunction smoothScroll() {\n  const galleryItem = document.querySelector('.gallery');\n  if (galleryItem) {\n    const { height } = galleryItem.getBoundingClientRect();\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nfunction clearList() {\n  const list = document.querySelector('.photos-list');\n  return (list.innerHTML = '');\n}\n\nexport { clearList, renderFunctions, smoothScroll };\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEaSURBVHgBrZZhDoIwDIUL0fjXo3gUb7R5Er0BHsXD7A+bASlhYeC6V4WXGCHr3reNtkAkqG2D9T70mh/HSj4HybyqyPQ9PeuaXlRQ19GFY4c5dDodLSHNK3/fSam29Q+0k7/N1ZAt5hCyh7kIKZl77y/IMBezgEwXTW4ienBxcc65DCQ0PDYCQghGMDASJJpzTG4ue0KABEHmKeBAQEPx3LiIhmKy/M+aitDyGJoPAWsI32vNWTXpVQnXRal2kPQmO7pPx6XpPRCQmsdjSZ8JhIA0FbOllMKsRZqCQoMpXCy0GJRrFc7hVpGLSVqFWaxk52ZnVgPbIaL5HhBovgVSMv+qg7kt9JznZ+VL//pL+5hWFXei+mwRj+UDSHQ9vnHBEYAAAAAASUVORK5CYII=\"","import axios from 'axios';\nimport { clearList } from './render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconOctagon from '/img/bi_x-octagon.png';\n\nconst KEY_URL = '44930216-c8fe7065044399c3ab26c911d';\nconst URL = 'https://pixabay.com';\nconst END_POINT = 'api/';\n\naxios.defaults.baseURL = URL;\n\nexport async function fetchPhotos({ q = '', page = 1, per_page = 15 } = {}) {\n  try {\n    const responce = await axios.get(END_POINT, {\n      params: {\n        key: KEY_URL,\n        q,\n        page,\n        per_page,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n      },\n    });\n\n    const data = await responce.data;\n\n    if (data.hits.length === 0) {\n      clearList();\n\n      iziToast.error({\n        position: 'topRight',\n        title: 'Sorry, there are no images matching',\n        message: 'your search query. Please try again!',\n        titleColor: 'white',\n        titleSize: '16px',\n        messageColor: 'white',\n        backgroundColor: '#ef4040',\n        iconUrl: iconOctagon,\n        layout: 2,\n        progressBarColor: '#b51b1b',\n        maxWidth: '432px',\n      });\n      return;\n    }\n    return data;\n  } catch (err) {\n    console.log(err);\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport caution from './img/bi_exclamation-triangle.png';\n\nimport { fetchPhotos } from './js/pixabay-api';\nimport {\n  clearList,\n  renderFunctions,\n  smoothScroll,\n} from './js/render-functions';\n\nconst elements = {\n  form: document.querySelector('.js-form'),\n  spinner: document.querySelector('.js-loader'),\n  btnMore: document.querySelector('.js-btn-more'),\n};\n\nconst hiddenClass = 'hidden';\n\nconst params = {\n  q: '',\n  page: 1,\n  per_page: 15,\n  maxPage: 0,\n};\n\nelements.form.addEventListener('submit', handlerSearch);\n\nasync function handlerSearch(evt) {\n  evt.preventDefault();\n  params.page = 1;\n\n  const form = evt.currentTarget;\n  params.q = form.elements.textValue.value.trim();\n\n  if (!params.q) {\n    iziToast.info({\n      position: 'topRight',\n      title: 'It is can not be empty',\n      message: 'you must to write something in the stroke',\n      titleColor: 'white',\n      titleSize: '16px',\n      messageColor: 'white',\n      backgroundColor: '#09f',\n      iconUrl: caution,\n      layout: 2,\n      progressBarColor: ' #3958c9',\n      maxWidth: '432px',\n      closeOnEscape: true,\n    });\n    return;\n  }\n  clearList();\n  spinnerShown();\n  elements.btnMore.classList.add(hiddenClass);\n\n  try {\n    const { hits, totalHits } = await fetchPhotos(params);\n\n    params.maxPage = Math.ceil(totalHits / params.per_page);\n\n    renderFunctions(hits);\n\n    if (hits.length > 0 && hits.length !== totalHits) {\n      elements.btnMore.classList.remove(hiddenClass);\n      elements.btnMore.addEventListener('click', handlerLoader);\n    } else {\n      elements.btnMore.classList.add(hiddenClass);\n    }\n  } catch (err) {\n    console.log(err);\n  } finally {\n    spinnerClose();\n    form.reset();\n  }\n}\n\nasync function handlerLoader() {\n  elements.btnMore.classList.add(hiddenClass);\n  spinnerShown();\n\n  params.page += 1;\n  try {\n    const { hits } = await fetchPhotos(params);\n\n    renderFunctions(hits);\n    smoothScroll();\n  } catch (err) {\n    console.log(err);\n  } finally {\n    spinnerClose();\n    elements.btnMore.classList.remove(hiddenClass);\n  }\n\n  if (params.maxPage === params.page) {\n    elements.btnMore.classList.add(hiddenClass);\n    iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      titleColor: 'white',\n      titleSize: '16px',\n      messageColor: 'white',\n      backgroundColor: '#09f',\n      iconUrl: caution,\n      progressBarColor: ' #3958c9',\n      maxWidth: '432px',\n    });\n\n    elements.btnMore.removeEventListener('click', handlerLoader);\n  }\n}\n\nfunction spinnerShown() {\n  return elements.spinner.classList.remove(hiddenClass);\n}\n\nfunction spinnerClose() {\n  return elements.spinner.classList.add(hiddenClass);\n}\n"],"names":["caution","renderFunctions","photos","list","photoList","downloads","comments","views","likes","tags","webformatURL","largeImageURL","SimpleLightbox","smoothScroll","galleryItem","height","clearList","iconOctagon","KEY_URL","URL","END_POINT","axios","fetchPhotos","q","page","per_page","data","iziToast","err","elements","hiddenClass","params","handlerSearch","evt","form","spinnerShown","hits","totalHits","handlerLoader","spinnerClose"],"mappings":"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"}